<section class="header_text sub">
      <img class="pageBanner" src="<%= image_path('pageBanner.png') %>" alt="New products" >
        <h4><span>Regsiter</span></h4>
      </section>
  <section class="main-content">        
        <div class="row">
          <div class="span7">         
            <h4 class="title"><span class="text"><strong>Register</strong> Form</span></h4>
            <%= form_for(:user, url: registration_path(User), :html => {:class => 'form-stacked',:id => 'new_user'}) do |f| %>
              <fieldset>
                <div class="control-group">
                <%= f.label :first_name,:class=>"control-label"  %>
                 <div class="controls">
        <%= f.text_field :first_name,:placeholder => "First Name"%>
      </div>
     </div>
      <div class="control-group">
      <%= f.label :last_name,:class=>"control-label"  %>
      <div class="controls">
        <%= f.text_field :last_name,:placeholder => "Last Name"%>
      </div>
     </div>
     <div class="control-group">
      <%= f.label :mobile_number,:class=>"control-label"  %>
      <div class="controls">
        <%= f.text_field :mobile_number,:placeholder => "Mobile Number"%>
      </div>
     </div>
     <div class="control-group">
      <%= f.label :email,:class=>"control-label"  %>
      <div class="controls">
        <%= f.text_field :email,:placeholder => "Email"%>
         <% if !@user.errors.empty? && !@user.errors[:email].empty? %>
                    <div class="inline-errors">Email <%= @user.errors[:email].join()%>
                    </div>
                <% end %>
      </div>

      </div>    
      <div class="control-group">
      <%= f.label :password,:class=>"control-label"  %>
      <div class="controls">
        <%= f.password_field :password,:placeholder => "Password"%>
      </div>
      </div> 
      <%= f.hidden_field :role, :value => "Customer" %>
                <hr>

                 <div class="control-group">
      <div class="controls">
      <%= f.submit :"Create your account",:class => "btn btn-inverse large"%>
      </div>
    </div>    
 
               
              </fieldset>
            <%end%>        
          </div>        
        </div>
      </section>


<script type="text/javascript">

$.validator.addMethod("loginRegex", function(value, element) {
        return this.optional(element) || /^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})$/.test(value);
    }, "Email address must be in the format of name@domain.com");

 $("#new_user").validate({
  errorPlacement: function (error, element) {
    error.insertAfter(element);
    error.css('color','red')
  },
  rules: {
  // username is required with max of 20 and min of 6
  "user[first_name]":{
    required: true,
    maxlength: 20,
    minlength: 3
  },

   "user[last_name]":{
    required: true,
    maxlength: 20,
    minlength: 3
  },

   "user[mobile_number]":{
    required: true,
    number: true,
    rangelength: [10,10]
  },
  // email is required with format
  "user[email]": {
    required: true,
    email: true,
    loginRegex: true
  },
  // password is required
  "user[password]": {
    required: true,
    minlength: 6
  }
  },
  // error messages
  messages: {
    "user[first_name]":{
      required: "First Name is required.",
      maxlength: "First Name must be less than 20",
      minlength: "First Name must be more than 3"
    },
    "user[last_name]":{
      required: "Last Name is required.",
      maxlength: "Last Name must be less than 20",
      minlength: "Last Name must be more than 3"
    },
    "user[mobile_number]":{
      required: "Mobile Number is required",
      number: "Mobile Number allows only digits",
      rangelength: "Mobile Number must be 10 digits"
    },

    "user[email]":{
      required: "Email is required",
      email: "Please enter a valid email address"
    },
    "user[password]": {
      required: "Password is required",
      minlength: "Password must be more than 6"
    }
  }
});

</script>